---
title: "Black Bear Aware Main Model Code"
author: "Mia Guarnieri, Claire Meuter, Sam Rozal, Chase Tarr"
date: '2022-09-05'
output: html_document
---

##Setup and packages

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
#attach packages
#note - Loading all of the ones Jason used, I don't think we will need all of them 

library(tidyverse)
library(here)
library(terra)
library(sf)
library(tmap)

#mia and claire's file path
gdrive_data <- "/Volumes/GoogleDrive/Shared drives/Black_Bear_Aware/gdrive_data"

#sam's file path

#chase's file path

```

#Data Wrangling Prior to Coding

*Data Sources*: Please see ReadMe file for metadata and citations.
*Reference Paper*: Insert hagani citation here

#Load in existing data layers

##California raster

```{r}
#Sam's example (delete or move later)

ca_raster <- rast(here(gdrive_data, "/IntermediateData/IntermediateData_Files/CARaster_Tiger_Reclassed/CARaster_Tiger_Reclassed.img"))

##check the coordinate reference system 
crs(ca_raster)

#plot CA raster
tm_shape(ca_raster) +
  tm_raster() +
  tmap_mode("view")

```

##Elevation (DEM, mean elevation)
```{r}

#northern California raster

dem_norcal <- rast(here(gdrive_data, "/InputData/InputData_Files/2010_DEM_USGSEROS_Norcal/30n150w_20101117_gmted_mea075.tif"))

#southern California raster

dem_socal <- rast(here(gdrive_data, "/InputData/InputData_Files/2010_DEM_USGSEROS_Socal/30n120w_20101117_gmted_mea075.tif"))

#merging the two rasters

dem_ca <- merge(dem_norcal, dem_socal)

#plot DEM raster
tm_shape(dem_ca) +
  tm_raster() +
  tmap_mode("view")

```

##Human population density

```{r}
#data are by year, from 2016 - 2020 (1 file per year)

human_pop_den_2016 <- raster("G:/Data/InputData/InputData_Files/HumanPopulationDensity_LandScan/2016_HumanPopulationDensity_LandScan/2016_conus_night_colorized.tif")

human_pop_den_2017 <- raster("G:/Data/InputData/InputData_Files/HumanPopulationDensity_LandScan/2017_HumanPopulationDensity_LandScan/2017_conus_night_colorized.tif")

human_pop_den_2018 <- raster("G:/Data/InputData/InputData_Files/HumanPopulationDensity_LandScan/2018_HumanPopulationDensity_LandScan/2018_conus_night_colorized.tif")

human_pop_den_2019 <- raster("G:/Data/InputData/InputData_Files/HumanPopulationDensity_LandScan/2019_HumanPopulationDensity_LandScan/2019_conus_night_colorized.tif")

human_pop_den_2020 <- raster("G:/Data/InputData/InputData_Files/HumanPopulationDensity_LandScan/2020_HumanPopulationDensity_LandScan/2020_conus_night_colorized.tif")

human_pop_den_2021 <- raster("G:/Data/InputData/InputData_Files/HumanPopulationDensity_LandScan/2021_HumanPopulationDensity_LandScan/2021_conus_night_colorized.tif")

```

##Land cover

```{r}
#data are by year, from 2001 - 2016 (1 file per year)

land_cover_2001 <- rast(here(gdrive_data, "/InputData/InputData_Files/LandCover_NLCD/2001_LandCover_NLCD/2001_LandCover_NLCD.xml"))

land_cover_2004 <- rast(here(gdrive_data, "/InputData/InputData_Files/LandCover_NLCD/2004_LandCover_NLCD/nlcd_2004_land_cover_l48_20210604.xml"))

land_cover_2006 <- rast(here(gdrive_data, "/InputData/InputData_Files/LandCover_NLCD/2006_LandCover_NLCD/nlcd_2006_land_cover_l48_20210604.xml"))

land_cover_2008 <- raster("G:/Data/InputData/InputData_Files/LandCover_NLCD/2008_LandCover_NLCD/nlcd_2008_land_cover_l48_20210604.img")

land_cover_2011 <- raster("G:/Data/InputData/InputData_Files/LandCover_NLCD/2011_LandCover_NLCD/nlcd_2011_land_cover_l48_20210604.img")

land_cover_2013 <- raster("G:/Data/InputData/InputData_Files/LandCover_NLCD/2013_LandCover_NLCD/nlcd_2013_land_cover_l48_20210604.img")

land_cover_2016 <- raster("G:/Data/InputData/InputData_Files/LandCover_NLCD/2016_LandCover_NLCD/nlcd_2016_land_cover_l48_20210604.img")

```

##Road density

```{r}
road_density_2014 <- raster("G:/Data/InputData/InputData_Files/2014_UsaRoadDensity_ESRI/2014_UsaRoadDensity_ESRI.tif")
```

##Forest density (canopy cover)

```{r}
#data from two years, 2011 and 2016

forest_dens_2011 <- raster("G:/Data/InputData/InputData_Files/TreeCanopyCover_NLCD/2011_TreeCanopyCover_NLCD/2011_TreeCanopyCover_NLCD.img")

forest_dens_2016 <- raster("G:/Data/InputData/InputData_Files/TreeCanopyCover_NLCD/2016_TreeCanopyCover_NLCD/2016_TreeCanopyCover_NLCD.img")

```


#Create remaining data layers

##Aspect

```{r}

```

##Terrain ruggedness

```{r}

```

##Distance to road

```{r}

```

##Distance to streams

```{r}

```

##Distance to urban areas

```{r}

```

##Distance to recreational areas

```{r}

```

##Distance to forest cover

```{r}


```


#Reformatting Data

Step 1: Adjust the data to the same geographic extent and projection
```{r}


```


Step 2: Buffering conflict points to create conflict raster
```{r}

```

Step 3: Create distance layers from roads, streams, etc...
```{r}

```


#Model Creation

Step 1: replicating the model from Hagani et al.
```{r}

```

Step 2
```{r}

```

