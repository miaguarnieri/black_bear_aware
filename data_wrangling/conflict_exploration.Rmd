---
title: "Conflict_exploration"
author: "Claire Meuter"
date: "2022-12-03"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
#attach packages

library(tidyverse)
library(here)
library(terra)
library(sf)
library(tmap)
library(beepr)
library(ggplot2)
library(lubridate)
#mia and claire's file path
gdrive_data <- "/Volumes/GoogleDrive/Shared drives/Black_Bear_Aware/gdrive_data"

```

## Read in Conflict data 
```{r}
conflict <- read_csv(here(gdrive_data, "/IntermediateData/IntermediateData_Files/2022_07_18_WIRClean_CDFW.csv"))
```

```{r}
#filter our erronous points
conflict <- conflict %>% 
  filter(wir_id != "WIR-2016-001081",
         wir_id != "WIR-2017-002420")
#keep only what we need
conflict_refined <- conflict %>% 
  separate(incident_date, into = c("inc_date", "inc_time"), sep = " ") %>% 
  separate(inc_date, into = c("month", "day", "year"), sep = "/") %>% 
  mutate(year = as.character.Date(year),
          "type" = confirmed_category,
         "county" = county_name,
         "conflict" = 1) %>%
  select(wir_id, year, type, county, latitude, longitude)

#filter out 2022
conflict_refined <- conflict_refined %>%
  filter(year != 2022)

```


```{r}
conflict_refined %>% count(type)
conflict_refined %>% count(year)
```



```{r}
ggplot(conflict_refined, aes(x = type)) +geom_histogram(stat = "count", aes(fill=type)) + facet_grid(cols = vars(year))+
  theme_minimal() +
  labs(x = "Type of Interaction",
       y = "count", 
       title = "Human-Black Bear Interaction Types")


```

